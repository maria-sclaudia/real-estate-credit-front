<section>
  <div style="display: flex; gap: 6px; align-items: center">
    <mat-form-field appearance="fill">
      <mat-label>Usuário</mat-label>
      <input
        matInput
        [formControl]="form"
        placeholder="Digite username"
        (keydown.enter)="search()"
      />
    </mat-form-field>

    <button mat-flat-button (click)="search()">Pesquisar</button>
  </div>

  <div style="display: flex; gap: 16px; margin-top: 16px" *ngIf="user">
    <div>
      <img
        [src]="user.avatar_url"
        [alt]="user.login + ' avatar'"
        width="240"
        height="240"
      />
    </div>

    <div>
      <p>Login: {{ user.login }}</p>
      <p>Nome: {{ user.name }}</p>
      <p>Local: {{ user.location }}</p>
      <p>Descrição: {{ user.bio }}</p>
      <p>Seguidores: {{ user.followers }}</p>
      <p>Seguindo: {{ user.following }}</p>
    </div>
  </div>

  <table
    mat-table
    [dataSource]="dataSource"
    class="mat-elevation-z8"
    *ngIf="user"
    style="margin-top: 24px"
  >
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Nome</th>
      <td mat-cell *matCellDef="let repo">{{ repo.name }}</td>
    </ng-container>

    <ng-container matColumnDef="stars">
      <th mat-header-cell *matHeaderCellDef>Estrelas</th>
      <td mat-cell *matCellDef="let repo">{{ repo.stargazers_count }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['name', 'stars']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['name', 'stars']"></tr>
  </table>

  <h3 *ngIf="this.user === undefined">Usuário não encontrado</h3>
</section>
